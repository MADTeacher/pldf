# Чек-лист создания шага реализации

Этот чек-лист помогает избежать ошибок при создании нового шага реализации.

## Перед созданием файлов шага

### 1. Проверка зависимостей
- [ ] Определены все зависимости шага (какие шаги должны быть завершены до этого)
- [ ] Все зависимости уже запланированы в `.pldf/memory/progress.json`
- [ ] Граф зависимостей не содержит циклов

### 2. Определение покрываемых функций
- [ ] Определено, какие функции из концепции покрывает этот шаг (P1, P2, P3)
- [ ] Функции явно указаны в `coversFunctions` в `.pldf/memory/progress.json`

## Создание файлов шага

### 3. Создание директории шага
- [ ] Директория создана в формате `.pldf/steps/step-[NN]-[name]/`
- [ ] Номер шага соответствует количеству уже запланированных шагов + 1
- [ ] Имя шага в kebab-case (например, `step-04-completions`)

### 4. Создание description.md
- [ ] Файл создан на основе структуры существующих шагов
- [ ] Содержит описание шага, почему он важен
- [ ] Указаны зависимости и покрываемые функции
- [ ] Указаны технические детали (Backend/Frontend)

### 5. Создание tasks.md
- [ ] Файл содержит конкретные задачи для Backend
- [ ] Файл содержит конкретные задачи для Frontend
- [ ] Все задачи в формате чек-листа с неотмеченными чекбоксами `[ ]`
- [ ] Задачи понятны и выполнимы

### 6. Создание tests.md
- [ ] Файл содержит описание автоматических тестов (Backend и Frontend)
- [ ] Файл содержит описание ручных тестов
- [ ] Указаны команды для запуска тестов
- [ ] Описаны ожидаемые результаты

### 7. Создание validation.md ⚠️ КРИТИЧЕСКИ ВАЖНО
- [ ] **ИСПОЛЬЗОВАН ШАБЛОН**: `.pldf/templates/step-validation-template.md` как основа
- [ ] **ВСЕ ЧЕКБОКСЫ НЕОТМЕЧЕННЫЕ**: Все чекбоксы в формате `[ ]`, а НЕ `[x]`
- [ ] Проверен формат существующих файлов (например, `step-03-habits/validation.md`)
- [ ] Файл содержит критерии для проверки после реализации, а не отчет о выполненной работе
- [ ] Указаны критерии готовности к следующему шагу

**Проверка формата чекбоксов:**
```markdown
# Правильно:
- [ ] Критерий 1

# Неправильно:
- [x] Критерий 1
```

## После создания файлов

### 8. Обновление .pldf/memory/progress.json
- [ ] Шаг добавлен в `plannedSteps`
- [ ] Статус шага добавлен в `stepStatus` со значением `"planned"`
- [ ] Зависимости добавлены в `planningMetadata.stepDependencies`
- [ ] Обновлен `planningMetadata.lastPlannedStep`
- [ ] Обновлены метрики прогресса в `planningMetadata.progressMetrics`

### 9. Обновление implementation-plan.md
- [ ] Шаг добавлен в список шагов реализации
- [ ] Обновлен граф зависимостей
- [ ] Указаны покрываемые функции

### 10. Финальная проверка
- [ ] Все файлы созданы и имеют правильный формат
- [ ] Все чекбоксы в `validation.md` неотмеченные `[ ]`
- [ ] Формат соответствует существующим шагам
- [ ] Зависимости логичны и не содержат циклов
- [ ] Шаг покрывает хотя бы одну функцию из концепции

## Типичные ошибки и как их избежать

### ❌ Ошибка: Чекбоксы в validation.md отмечены как [x]
**Причина**: Файл validation.md содержит критерии для проверки, а не отчет о выполненной работе  
**Решение**: 
- Использовать шаблон `.pldf/templates/step-validation-template.md`
- Проверить формат существующих файлов
- Убедиться, что все чекбоксы в формате `[ ]`

### ❌ Ошибка: Неправильный номер шага
**Причина**: Не учтено количество уже запланированных шагов  
**Решение**: Проверить `plannedSteps.length` в `.pldf/memory/progress.json` и использовать `NN = plannedSteps.length + 1`

### ❌ Ошибка: Циклы в зависимостях
**Причина**: Шаг зависит от шага, который зависит от него  
**Решение**: Проверить граф зависимостей перед добавлением в `stepDependencies`

### ❌ Ошибка: Шаг не покрывает функции
**Причина**: Не указано, какие функции из концепции покрывает шаг  
**Решение**: Явно указать функции в `coversFunctions` и в `description.md`

---
**Дата создания**: 2025-01-27  
**Последнее обновление**: 2025-01-27

