---
description: Этап 2: Выбор технологического стека с обоснованием и обсуждением со студентом
handoffs: 
  - label: Создать архитектуру
    agent: pldf.architecture
    prompt: Создай архитектуру проекта на основе стека
scripts:
  sh:
  ps:
---

## Пользовательский ввод

```text
$ARGUMENTS
```

Ты **ОБЯЗАН** учитывать пользовательский ввод перед продолжением (если он не пустой).

## Описание

На этом этапе **PLDF (Progressive Learning Development Framework)** выбирается технологический стек для проекта. Это критически важный этап для обучения, так как студент должен понимать **ПОЧЕМУ** выбираются те или иные технологии, а не просто следовать рекомендациям.

## Предварительные условия

- Должен существовать `.pldf/concept.md`
- Должен существовать `.pldf/ui-design.md` (утвержденный)
- Если файлы отсутствуют, предложи выполнить предыдущие этапы

## Цель этапа

Выбрать технологический стек, который:
- Подходит для реализации дизайна и функций из концепции
- Имеет обоснование для каждого выбора
- Учитывает ограничения и предпочтения студента
- Соответствует лучшим практикам для типа проекта

## Рабочий процесс

0. **Загрузка контекста**:
   - Прочитай `.pldf/concept.md`
   - Прочитай `.pldf/ui-design.md`
   - Прочитай `.pldf/project-context.md`
   - Определи тип проекта (веб, мобильное, десктоп, API, и т.д.)

2. **Проверка предпочтений студента**:
   - Если в пользовательском вводе уже содержатся требования по тем технологиям (язык программирования, билиотеки и/или фреймворки), которые студент хочет использовать в разрабатываемом проекте - **переходи к  шагу 3**
   - Спроси: "Есть ли у тебя предпочтения по технологиям или ограничения? (например, что нужно использовать Python 3.13 для серверной части, а Flutter 3.38 для клиентской, какие версии библиотек следует добавить в проект или, что запрещено использовать какую-то конкретную технологию. Напрмер - React)"
   - Если есть предпочтения, задокументируй их
   - Если нет, переходи к анализу требований

3. **Анализ требований проекта**:
   - На основе концепции и дизайна определи технические требования:
     - Тип приложения (SPA, SSR, мобильное, десктоп)
     - Необходимость реального времени (WebSocket, gRPC и т.д.)
     - Требования к производительности
     - Масштаб проекта
     - Интеграции с внешними сервисами

4. **Генерация предложений по технологиям**:

   Для каждого компонента стека (язык, фреймворк, БД, и т.д.):

   a. **Определение вариантов**:
      - Предложи 2-3 варианта технологий
      - Учитывай предпочтения студента (если есть)

   b. **Создание обоснования**:
      - Для каждого варианта укажи:
        - **Плюсы**: Преимущества для данного проекта
        - **Минусы**: Недостатки и ограничения
        - **Когда использовать**: Идеальные сценарии
        - **Сложность обучения**: Насколько легко освоить
        - **Сообщество и поддержка**: Доступность ресурсов

   c. **Рекомендация**:
      - Укажи рекомендуемый вариант с обоснованием
      - Объясни, почему именно этот вариант лучше для проекта

5. **Обсуждение со студентом**:
   - Представь предложения в формате таблицы или списка
   - Для каждого компонента спроси: "Согласен с выбором [технология]? (да/нет/другое)"
   - Если "другое", попроси указать альтернативу и обсуди ее
   - Если "нет", обсуди альтернативы и приди к согласию
   - **НЕ ПЕРЕХОДИ** к следующему этапу пока не получишь ответы по всем компонентам

5.5. **Запись решений в Decision Log**:
   - Открой `.pldf/project-context.md` (создай из шаблона `.pldf/templates/project-context-template.md`, если не существует)
   - В разделе "Decision Log" → "История решений" добавь записи для **КАЖДОГО** компонента стека:
     - Язык программирования
     - Frontend фреймворк/библиотека (если применимо)
     - Backend фреймворк (если применимо)
     - База данных
     - Инструменты тестирования
     - Инструменты сборки/развертывания
   - Для каждого решения укажи:
     - **Дата**: текущая дата в формате YYYY-MM-DD
     - **Этап**: tech
     - **Причина**: обоснование из обсуждения со студентом
     - **Альтернативы**: варианты, которые рассматривались, с их плюсами и минусами
     - **Влияние на следующие этапы**: как это решение повлияет на архитектуру (например, "Выбор Flutter повлияет на структуру проекта в архитектуре, потребует использования Navigator 1.0/2.0 или внешнюю библиотеку для навигации")
     - **Связанные решения**: ссылки на другие решения из этого этапа (например, "Решение: Выбор Dart связан с выбором Flutter, так как Dart является основным языком разработки для Flutter")

6. **Консультация по структуре проекта**:
   - Обсуди подходы к организации кода:
     - Feature-first vs Layer-first
     - Monorepo (**предпочительнее**) vs отдельные репозитории
     - Модульная архитектура
   - Предложи рекомендацию с обоснованием
   - Получи согласие студента
   - **НЕ ПЕРЕХОДИ** к следующему этапу пока студент ны выберет подход для организации кода

7. **Создание документации стека**:
   - Загрузи шаблон `.pldf/templates/tech-stack-template.md` 
   - Замени токены-заполнители в квадратных скобках (например, [БИБЛИОТЕКА_1], [ИНСТРУМЕНТ]) на конкретные значения, полученные в ходе утверждения технического стека проекта
   - Добавь обоснование для каждого выбора
   - Сохрани в `.pldf/tech-stack.md`
   - Создай `.pldf/tech-rationale.md` с детальным обоснованием

8. **Валидация выбора технологий**:
   
   **ВАЖНО**: Перед сохранением файлов выполни полную валидацию выбора технологий по следующему чек-листу:
   
   - [ ] **Каждый выбор технологии обоснован**
     - Для каждого компонента стека есть обоснование выбора
     - Указаны преимущества выбранной технологии для проекта
     - **Если не выполнено**: добавь обоснование для каждого выбора
   
   - [ ] **Альтернативы рассмотрены и обсуждены**
     - Для каждого компонента рассмотрены 2-3 альтернативы
     - Указаны плюсы и минусы каждой альтернативы
     - Объяснено, почему выбранная технология лучше для проекта
     - **Если не выполнено**: обсуди альтернативы для каждого компонента
   
   - [ ] **Стек совместим и проверен**
     - Все технологии совместимы друг с другом
     - Нет конфликтующих зависимостей
     - Стек проверен на совместимость
     - **Если не выполнено**: проверь совместимость стека
   
   - [ ] **Учтены ограничения и предпочтения студента**
     - Если были предпочтения студента, они учтены
     - Если были ограничения, они учтены
     - Объяснены последствия учета предпочтений/ограничений
     - **Если не выполнено**: обсуди предпочтения и ограничения
   
   - [ ] **Стек подходит для реализации дизайна**
     - Выбранные технологии позволяют реализовать все экраны из дизайна
     - Учтены требования к платформам
     - **Если не выполнено**: обсуди соответствие стека дизайну
   
   - [ ] **Документация стека создана**
     - Файл `.pldf/tech-stack.md` создан и заполнен
     - Файл `.pldf/tech-rationale.md` создан с детальным обоснованием
     - **Если не выполнено**: создай документацию
   
   **ВАЖНО**: **НЕ ПЕРЕХОДИ** к следующему этапу, пока валидация не пройдена успешно
   
   **Если валидация не пройдена:**
   - Укажи конкретные пункты, которые не выполнены
   - Предложи конкретные исправления
   - **НЕ ПРОДОЛЖАЙ** до успешного прохождения валидации
   
   **Если валидация пройдена:**
   - Подтверди успешную валидацию
   - Переходи к обновлению контекста

9. **Обновление контекста**:
   - Обнови `.pldf/project-context.md` с информацией о стеке
   - Добавь ссылки на документацию выбранных технологий

10. **Отчет**:
   - Выведи путь к созданным файлам
   - Предложи перейти к следующему этапу (архитектура)

## Правила

- **ВСЕГДА** предоставляй обоснование для каждого выбора
- **ОБСУЖДАЙ** альтернативы, даже если рекомендация очевидна
- **УЧИТЫВАЙ** предпочтения студента, но объясняй последствия
- **НЕ** навязывай технологии без объяснения

## Компоненты стека для рассмотрения

- Язык программирования
- Frontend фреймворк/библиотека (если применимо)
- Backend фреймворк (если применимо)
- База данных
- Инструменты тестирования
- Инструменты сборки/развертывания
- Дополнительные библиотеки и зависимости

## Выходные артефакты

- `.pldf/tech-stack.md` - выбранный технологический стек
- `.pldf/tech-rationale.md` - детальное обоснование выбора
- `.pldf/project-context.md` - обновленный контекст проекта

## Подсказки и помощь

### Контекстные подсказки
При возникновении ошибок валидации система автоматически предложит подсказки для выбора и обоснования технологий.

### Подсказки по запросу
Используйте команду `/hint` для получения наводящих вопросов:
- `/hint tech` - подсказка для этапа выбора технологий
- `/hint tech stack` - подсказка по технологическому стеку

### Типичные ошибки и решения

**Выбор технологий не обоснован:**
- Подсказка: Объясни, почему выбраны именно эти технологии. Какие альтернативы ты рассматривал и почему от них отказался?
- Ресурсы: См. `.pldf/hints/resources.json` → `tech_selection`, `tech_comparison`

**Технологический стек неполный:**
- Подсказка: Укажи все необходимые технологии: фронтенд, бэкенд, база данных, инструменты сборки, тестирования.
- Ресурсы: См. `.pldf/hints/resources.json` → `tech_stack`

## Следующий этап

После выбора технологий переходите к `/pldf.architecture` для проектирования архитектуры и структуры проекта.

