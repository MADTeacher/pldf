{
  "stages": {
    "concept": {
      "validationHints": {
        "problem_not_defined": {
          "message": "Проблема описана абстрактно",
          "hint": "Подумайте: кто конкретно испытывает проблему? В каких ситуациях? Приведите примеры из реальной жизни.",
          "resources": ["concept_definition", "problem_solving"]
        },
        "target_audience_missing": {
          "message": "Целевая аудитория не детализирована",
          "hint": "Опишите конкретных пользователей: их возраст, профессию, технические навыки. Какие у них потребности и ожидания?",
          "resources": ["user_research"]
        },
        "mvp_too_large": {
          "message": "MVP содержит слишком много функций",
          "hint": "MVP должен быть минимальным. Подумайте: без каких функций проект все еще решает основную проблему? Оставьте только P1 функции.",
          "resources": ["mvp_guide"]
        },
        "success_criteria_abstract": {
          "message": "Критерии успеха абстрактны",
          "hint": "Сформулируйте конкретные, измеримые метрики. Например: '100 пользователей за первый месяц' вместо 'много пользователей'.",
          "resources": ["success_metrics"]
        },
        "functions_not_prioritized": {
          "message": "Функции не приоритизированы",
          "hint": "Разделите функции на P1 (критичные для MVP), P2 (важные, но не критичные), P3 (можно отложить).",
          "resources": ["prioritization"]
        }
      },
      "contextualHints": {
        "mvp_too_large": {
          "trigger": "количество функций MVP > 10",
          "hint": "MVP должен быть минимальным. Подумайте: без каких функций проект все еще решает основную проблему?",
          "resources": ["mvp_guide"]
        }
      }
    },
    "platforms": {
      "validationHints": {
        "platforms_not_defined": {
          "message": "Платформы не определены",
          "hint": "Подумайте: где пользователи будут использовать ваше приложение? На телефоне, компьютере, в браузере? Это влияет на выбор технологий.",
          "resources": ["platform_selection"]
        },
        "platforms_not_justified": {
          "message": "Выбор платформ не обоснован",
          "hint": "Объясните, почему выбраны именно эти платформы. Как это связано с целевой аудиторией и функциями проекта?",
          "resources": ["platform_rationale"]
        }
      }
    },
    "design": {
      "validationHints": {
        "prototype_missing": {
          "message": "Прототипы не созданы",
          "hint": "Создайте HTML прототипы для каждого экрана. Это поможет визуализировать интерфейс до реализации.",
          "resources": ["prototyping", "html_basics"]
        },
        "mvp_not_covered": {
          "message": "Не все функции MVP покрыты экранами",
          "hint": "Проверьте концепцию: для каждой P1 функции должен быть соответствующий экран в прототипе.",
          "resources": ["ui_design"]
        },
        "navigation_broken": {
          "message": "Навигация между экранами не работает",
          "hint": "Проверьте все ссылки в прототипе. Пользователь должен иметь возможность перейти между экранами и вернуться назад.",
          "resources": ["navigation_design"]
        },
        "html_invalid": {
          "message": "HTML прототип содержит ошибки",
          "hint": "Проверьте синтаксис HTML: все теги должны быть закрыты, атрибуты в кавычках. Откройте прототип в браузере для проверки.",
          "resources": ["html_validation"]
        },
        "data_not_defined": {
          "message": "Данные для экранов не определены",
          "hint": "Для каждого экрана определите: какие данные отображаются, какие данные вводятся пользователем, какие данные передаются между экранами.",
          "resources": ["data_modeling"]
        },
        "api_endpoint_mismatch": {
          "message": "Создан эндпоинт для элемента, которого нет в прототипе",
          "hint": "Проверьте прототип еще раз. API контракты должны создаваться только на основе элементов, которые есть в UI прототипе.",
          "resources": ["api_design"],
          "patterns": ["data-fetching/rest-api.md"]
        }
      }
    },
    "tech": {
      "validationHints": {
        "stack_not_justified": {
          "message": "Выбор технологий не обоснован",
          "hint": "Объясните, почему выбраны именно эти технологии. Какие альтернативы вы рассматривали и почему от них отказались?",
          "resources": ["tech_selection"]
        },
        "stack_incomplete": {
          "message": "Технологический стек неполный",
          "hint": "Укажите все необходимые технологии: фронтенд, бэкенд, база данных, инструменты сборки, тестирования.",
          "resources": ["tech_stack"]
        },
        "alternatives_not_discussed": {
          "message": "Альтернативы не обсуждены",
          "hint": "Для каждой выбранной технологии рассмотрите альтернативы и объясните, почему выбрана именно она.",
          "resources": ["tech_comparison"]
        }
      }
    },
    "architecture": {
      "validationHints": {
        "architecture_not_described": {
          "message": "Архитектура не описана",
          "hint": "Опишите структуру проекта: как организованы компоненты, как они взаимодействуют, какие паттерны используются.",
          "resources": ["architecture_patterns"],
          "patterns": ["clean-architecture/clean-architecture.md", "clean-architecture/layered-architecture.md", "clean-architecture/hexagonal-architecture.md"]
        },
        "data_model_missing": {
          "message": "Модель данных не определена",
          "hint": "На основе UI прототипа определите структуру данных: какие сущности есть, какие у них поля, как они связаны.",
          "resources": ["data_modeling"]
        },
        "contracts_missing": {
          "message": "API контракты не созданы",
          "hint": "Создайте контракты для всех эндпоинтов, которые нужны для работы UI. Используйте прототип как источник требований.",
          "resources": ["api_design", "rest_api"],
          "patterns": ["data-fetching/rest-api.md", "data-fetching/graphql.md"]
        },
        "contracts_extra": {
          "message": "Созданы контракты для элементов, которых нет в прототипе",
          "hint": "Проверьте прототип: каждый контракт должен соответствовать элементу интерфейса. Удалите лишние контракты.",
          "resources": ["api_design"]
        },
        "structure_not_defined": {
          "message": "Структура директорий не определена",
          "hint": "Опишите структуру проекта: где будут находиться компоненты, сервисы, утилиты, тесты.",
          "resources": ["project_structure"],
          "patterns": ["clean-architecture/flutter-structure.md", "clean-architecture/react-structure.md", "clean-architecture/backend-structure.md", "clean-architecture/go-structure.md"]
        }
      }
    },
    "plan": {
      "validationHints": {
        "steps_missing": {
          "message": "Шаги реализации не определены",
          "hint": "Разбейте проект на конкретные шаги. Каждый шаг должен быть независимо тестируемым и иметь четкие критерии завершения.",
          "resources": ["planning"]
        },
        "dependencies_missing": {
          "message": "Зависимости между шагами не определены",
          "hint": "Определите, какие шаги зависят от других. Базовые шаги (настройка проекта) должны идти первыми.",
          "resources": ["dependency_management"]
        },
        "tests_missing": {
          "message": "Тесты для шагов не определены",
          "hint": "Для каждого шага определите, как вы будете проверять его выполнение: автоматические тесты или ручная проверка.",
          "resources": ["testing"]
        },
        "mvp_not_covered": {
          "message": "Не все функции MVP покрыты шагами",
          "hint": "Проверьте концепцию: для каждой P1 функции должен быть соответствующий шаг или шаги в плане.",
          "resources": ["planning"]
        },
        "steps_too_large": {
          "message": "Шаги слишком большие",
          "hint": "Разбейте большие шаги на более мелкие. Каждый шаг должен быть выполним за разумное время (1-4 часа).",
          "resources": ["task_breakdown"]
        }
      }
    },
    "implement": {
      "validationHints": {
        "validation_skipped": {
          "message": "Валидация шага пропущена",
          "hint": "Перед переходом к следующему шагу обязательно выполните валидацию текущего шага. Это гарантирует качество.",
          "resources": ["validation"]
        },
        "dependencies_ignored": {
          "message": "Зависимости между шагами игнорируются",
          "hint": "Проверьте план: выполняйте шаги в правильном порядке, учитывая зависимости. Нельзя реализовать шаг, пока не выполнены его зависимости.",
          "resources": ["dependency_management"]
        },
        "tests_failed": {
          "message": "Тесты не пройдены",
          "hint": "Исправьте ошибки в тестах перед продолжением. Тесты показывают, что шаг выполнен правильно.",
          "resources": ["testing", "debugging"]
        },
        "progress_not_updated": {
          "message": "Прогресс не обновлен",
          "hint": "После завершения шага обновите .pldf/memory/progress.json. Это поможет отслеживать прогресс и возобновить работу с любого шага.",
          "resources": ["progress_tracking"]
        }
      }
    },
    "review": {
      "validationHints": {
        "artifacts_not_analyzed": {
          "message": "Артефакты не проанализированы",
          "hint": "Проверьте все созданные артефакты: концепцию, дизайн, архитектуру, код. Выявите сильные и слабые стороны.",
          "resources": ["code_review"]
        },
        "improvements_missing": {
          "message": "Улучшения не определены",
          "hint": "Определите, что можно улучшить в проекте. Приоритизируйте улучшения по важности.",
          "resources": ["continuous_improvement"]
        }
      }
    },
    "security": {
      "validationHints": {
        "owasp_top10_failed": {
          "message": "Найдены уязвимости из OWASP Top 10",
          "hint": "Проанализируйте найденные уязвимости. Какие из них критичны для вашего проекта? Начните с исправления критичных проблем.",
          "resources": ["owasp_top10", "secure_coding"]
        },
        "owasp_asvs_failed": {
          "message": "Найдены проблемы соответствия OWASP ASVS",
          "hint": "Изучите требования OWASP ASVS для вашего уровня. Какие категории требуют улучшения?",
          "resources": ["owasp_asvs", "secure_coding"]
        },
        "privacy_law_violations": {
          "message": "Найдены нарушения законодательства по персональным данным",
          "hint": "Изучите требования законодательства. Какие персональные данные обрабатывает ваш проект? Как они защищены?",
          "resources": ["152fz", "gdpr"]
        },
        "vulnerable_dependencies": {
          "message": "Обнаружены уязвимости в зависимостях",
          "hint": "Проверьте, какие зависимости имеют известные уязвимости. Можно ли их обновить до безопасных версий?",
          "resources": ["dependency_security"]
        },
        "secrets_in_code": {
          "message": "Обнаружены секреты в коде",
          "hint": "Секреты (API ключи, пароли, токены) не должны храниться в коде. Переместите их в переменные окружения или secrets manager.",
          "resources": ["secure_coding", "secrets_management"]
        },
        "insecure_authentication": {
          "message": "Проблемы с реализацией аутентификации",
          "hint": "Проверьте реализацию аутентификации: используются ли стойкие алгоритмы хеширования паролей? Есть ли защита от brute force?",
          "resources": ["secure_coding", "auth_patterns"]
        },
        "injection_vulnerabilities": {
          "message": "Обнаружены уязвимости типа Injection",
          "hint": "Проверьте использование пользовательского ввода в запросах. Используйте параметризованные запросы и валидацию входных данных.",
          "resources": ["secure_coding", "owasp_top10"]
        }
      }
    }
  },
  "generalHints": {
    "stuck": {
      "hint": "Если вы застряли, попробуйте: 1) Вернуться к предыдущему этапу и пересмотреть решения, 2) Использовать команду /hint для получения подсказок, 3) Изучить дополнительные ресурсы.",
      "resources": ["getting_unstuck"]
    },
    "validation_failed": {
      "hint": "Если валидация не пройдена, внимательно прочитайте сообщения об ошибках. Система автоматически предложит подсказки для каждой ошибки.",
      "resources": ["validation_guide"]
    }
  }
}

